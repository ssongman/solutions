

# 11. AKS 설치 및 Karama 설정



## 1) AKS1,2 클러스터 생성

```sh
# 리소스그룹 생성
$  az group list -o table
Name                                                                   Location      Status
---------------------------------------------------------------------  ------------  ---------
rg-az01-poc-cloudautomation-sh-01                                      koreacentral  Succeeded
rg-az01-poc-cloudautomation-jw-01                                      koreacentral  Succeeded
rg-az01-poc-cloudautomation-dh-01                                      koreacentral  Succeeded
rg-az01-poc-cloudautomation-ck-01                                      koreacentral  Succeeded
rg-az01-poc-cloudautomation-ww-01                                      koreacentral  Succeeded
MC-rg-az01-poc-cloudautomation-ww-01                                   koreacentral  Succeeded
MA_defaultazuremonitorworkspace-se_koreacentral_managed                koreacentral  Succeeded
rg-az01-poc-cloudautomation-jy-01                                      koreacentral  Succeeded
MC_rg-az01-poc-cloudautomation-jy-01_aks-az01-dev-jytest_koreacentral  koreacentral  Succeeded


$ az group create \
  -n rg-az01-ca-yj01 \
  -l koreacentral \
  --tags EMAIL='yj.song@kt.com' \
         ServiceName='cloud-automation' \
         Name='songyangjong' \
         CreateDate='2025-09-05'


$  az group list -o table
Name                                                                   Location      Status
---------------------------------------------------------------------  ------------  ---------
...
rg-az01-ca-yj01                                                        koreacentral  Succeeded




  
# AKS 목록
$ az aks list -o table
Name                                        Location      ResourceGroup                      KubernetesVersion    CurrentKubernetesVersion    ProvisioningState    Fqdn
------------------------------------------  ------------  ---------------------------------  -------------------  --------------------------  -------------------  ----------------------------------------------------------------------
aks-az01-poc-cloudautomation-monitoring-01  koreacentral  rg-az01-poc-cloudautomation-ww-01  1.31                 1.31.7                      Succeeded            aks-az01-p-rg-az01-poc-clou-0597e2-2bpqt8hq.hcp.koreacentral.azmk8s.io
aks-az01-dev-jytest                         koreacentral  rg-az01-poc-cloudautomation-jy-01  1.32                 1.32.5                      Succeeded            aks-az01-d-rg-az01-poc-clou-0597e2-5f1r3ne3.hcp.koreacentral.azmk8s.io


# AKS1 생성
$ az aks create \
  -g rg-az01-ca-yj01 \
  -n aks-az01-ca-yj-01 \
  --node-count 2 \
  --enable-managed-identity \
  --network-plugin azure \
  --network-plugin-mode overlay \
  --pod-cidr 10.244.0.0/16 \
  --service-cidr 10.0.0.0/16 \
  --dns-service-ip 10.0.0.10 \
  --generate-ssh-keys

# AKS2 생성
$ az aks create \
  -g rg-az01-ca-yj01 \
  -n aks-az01-ca-yj-02 \
  --node-count 2 \
  --enable-managed-identity \
  --network-plugin azure \
  --network-plugin-mode overlay \
  --pod-cidr 10.244.0.0/16 \
  --service-cidr 10.0.0.0/16 \
  --dns-service-ip 10.0.0.10 \
  --generate-ssh-keys



```

클러스터 연결:

```sh
$ az aks get-credentials -g rg-az01-ca-yj01 -n aks-az01-ca-yj-01

$ kubectl config get-contexts
CURRENT   NAME                        CLUSTER                     AUTHINFO                                                    NAMESPACE
*         aks-az01-ca-yj-01           aks-az01-ca-yj-01           clusterUser_rg-az01-ca-yj01_aks-az01-ca-yj-01
          aks-az01-cloudbiz-comm-01   aks-az01-cloudbiz-comm-01   clusterUser_rg-cloudbiz-comm-01_aks-az01-cloudbiz-comm-01   temp


$ az aks get-credentials -g rg-az01-ca-yj01 -n aks-az01-ca-yj-02



```



## 2) Karmada 설정



